sequenceDiagram
    participant User
    participant CLI as ConfigMigrate
    participant CM as ConfigManager
    participant DS as DatabaseService
    participant FS as FileSystem

    User->>CLI: orbit config migrate
    CLI->>CM: getSiteOverrides
    CM-->>CLI: site overrides map
    
    alt No overrides
        CLI-->>User: No site overrides found
    else Has overrides
        CLI->>CM: getPaths
        CM-->>CLI: project paths array
        
        loop For each site override
            alt Has php_version
                CLI->>CLI: Find project path in paths
                CLI->>FS: Check if path exists
                
                alt Path found
                    CLI->>DS: setSitePhpVersion slug path version
                    DS-->>CLI: success
                    CLI-->>User: Migrated slug to PHP version
                else Path not found
                    CLI->>CLI: Record error
                end
            end
        end
        
        alt Sites migrated > 0
            CLI->>CM: set sites to empty
            CLI-->>User: Cleared sites from config.json
        end
        
        CLI-->>User: Migration complete N sites migrated
        
        alt Has errors
            CLI-->>User: List errors
        end
    end
